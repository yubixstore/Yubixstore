<script>
  let cart = [];
  let discountCodes = { "SALE10": 0.1, "VIP20": 0.2 }; // Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø®ØµÙ…

  function addToCart(name, price){
    cart.push({name,price});
    renderCart();
  }

  function renderCart(){
    let list = document.getElementById("cartItems");
    list.innerHTML="";
    let total = 0;
    cart.forEach(item => {
      let li = document.createElement("li");
      li.textContent = `${item.name} - ${item.price}Ø¯Ø¬`;
      list.appendChild(li);
      total += item.price;
    });
    document.getElementById("total").textContent = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total} Ø¯Ø¬`;
  }

  document.getElementById("orderForm").addEventListener("submit", function(e){
    e.preventDefault();
    let name = document.getElementById("name").value;
    let phone = document.getElementById("phone").value;
    let address = document.getElementById("address").value;
    let discountCode = document.getElementById("discount").value.trim();

    let total = cart.reduce((sum,item)=>sum+item.price,0);
    if(discountCodes[discountCode]){
      let discount = discountCodes[discountCode];
      total = total - (total*discount);
    }

    let items = cart.map(i => `${i.name} - ${i.price}Ø¯Ø¬`).join("\n");
    let message = `ðŸ“¦ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:\n\nðŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}\nðŸ“ž Ø§Ù„Ù‡Ø§ØªÙ: ${phone}\nðŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}\nðŸ›’ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:\n${items}\nðŸ’° Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø¨Ø¹Ø¯ Ø§Ù„Ø®ØµÙ…: ${total} Ø¯Ø¬`;

    // âœ… Ù‡Ù†Ø§ Ø­Ø·ÙŠØª Ø§Ù„ØªÙˆÙƒÙ† ÙˆØ§Ù„Ù€ chat_id Ù„ÙŠ Ø¹Ø·ÙŠØªÙ†ÙŠ
    let token = "8279772647:AAHE7reIiqjDbW8Jkpr57KSBCKH5w0SRA60";
    let chat_id = "6514099914";

    fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        chat_id: chat_id,
        text: message
      })
    })
    .then(res => res.json())
    .then(data => {
      if(data.ok){
        document.getElementById("message").textContent = "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ø¨ÙˆØª!";
        cart = [];
        renderCart();
        document.getElementById("orderForm").reset();
      }else{
        document.getElementById("message").textContent = "âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„! (ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙƒÙ† Ø£Ùˆ ID)";
      }
    })
    .catch(err => {
      document.getElementById("message").textContent = "âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„!";
    });
  });

  document.getElementById("enterBtn").addEventListener("click",()=>{
    document.getElementById("welcome").style.display="none";
    document.getElementById("store").style.display="block";
  });
</script>
